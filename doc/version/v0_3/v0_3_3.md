# v0.3.3：Object 生命週期

<br>

---

<br>

**目標**：完善物件從創建到回收的完整生命週期

**需要實現的功能**：

| 功能 | 說明 |
|------|------|
| `Object.hashCode()` | 物件雜湊碼（利用 Mark Word） |
| `Object.equals()` | 預設的相等比較 |
| `Object.clone()` | 物件複製 |
| `Object.finalize()` | 物件終結方法（GC 前呼叫） |

<br>

**finalize 的特殊處理**：

```
物件回收流程（有 finalize 時）：

  ┌─────────┐     GC 發現      ┌─────────────┐
  │ 活著的   │ ──────────────► │ 不可達但有   │
  │ 物件    │   物件不可達     │ finalize    │
  └─────────┘                  └──────┬──────┘
                                      │
                     放入 Finalization Queue
                                      │
                                      ▼
                              ┌─────────────┐
                              │ Finalizer   │
                              │ 執行緒呼叫   │
                              │ finalize()  │
                              └──────┬──────┘
                                     │
              ┌──────────────────────┼──────────────────────┐
              │                      │                      │
              ▼                      ▼                      ▼
      ┌─────────────┐        ┌─────────────┐        ┌─────────────┐
      │ 復活（又被   │        │ 正常結束    │        │ 拋出異常    │
      │ 引用了）    │        │ 下次 GC 回收│        │ 忽略，繼續  │
      └─────────────┘        └─────────────┘        └─────────────┘
```

<br>
