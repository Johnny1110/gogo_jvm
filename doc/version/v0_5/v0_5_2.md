# v0.5.2：Mark-Compact GC

<br>

---

<br>

**目標**：實現標記-壓縮垃圾回收器，解決記憶體碎片問題

**壓縮演算法（Lisp2 風格）**：

```
壓縮過程（三次遍歷）：

第一次遍歷：計算新地址
  ┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┐
  │ A │   │ B │   │   │ C │   │ D │   │   │
  └─┬─┴───┴─┬─┴───┴───┴─┬─┴───┴─┬─┴───┴───┘
    │       │           │       │
    │       │           │       └─► 新地址: 3
    │       │           └─► 新地址: 2
    │       └─► 新地址: 1
    └─► 新地址: 0

第二次遍歷：更新所有引用
  將所有指向 A, B, C, D 的引用更新為新地址

第三次遍歷：移動物件
  ┌───┬───┬───┬───┬───────────────────────┐
  │ A │ B │ C │ D │       Free            │
  └───┴───┴───┴───┴───────────────────────┘
```

<br>