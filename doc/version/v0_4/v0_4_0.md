# v0.4.0：Thread 基礎

<br>

---

<br>

**目標**：實現 `java.lang.Thread` 類與基本執行緒管理

**設計要點**：

```
Java Thread 與底層實現的映射：

  ┌─────────────────┐
  │ Java Thread     │
  │ ┌─────────────┐ │         ┌─────────────────┐
  │ │ run()       │ │         │ Go goroutine    │
  │ │ start()     │─┼────────►│ (輕量級執行緒)   │
  │ │ join()      │ │         │                 │
  │ └─────────────┘ │         └─────────────────┘
  └─────────────────┘

  優點：利用 Go 的 goroutine 調度器
  缺點：與真實 JVM 的執行緒模型略有差異
```

<br>

**需要實現的功能**：

| 方法 | 說明 |
|------|------|
| `Thread.start()` | 啟動執行緒 |
| `Thread.run()` | 執行緒執行體 |
| `Thread.join()` | 等待執行緒結束 |
| `Thread.sleep(long)` | 執行緒休眠 |
| `Thread.yield()` | 讓出 CPU |
| `Thread.currentThread()` | 取得當前執行緒 |

<br>

**執行緒狀態機**：

```
         start()
  NEW ─────────────► RUNNABLE ◄─────┐
                         │          │
                         │ wait()   │ notify()
                         ▼          │
                      WAITING ──────┘
                         │
                         │ timeout
                         ▼
                   TIMED_WAITING
                         │
         run() 結束      │
            ┌────────────┘
            ▼
       TERMINATED
```

<br>

**測試目標**：

```java
public class TestThread {
    public static void main(String[] args) {
        Thread t = new Thread(() -> {
            System.out.println(1);  // 子執行緒輸出
        });
        t.start();
        t.join();
        System.out.println(2);      // 主執行緒輸出
    }
}
```